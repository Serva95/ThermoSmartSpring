<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      lang="it">
<head th:insert="fragments/header :: header"></head>
<head>
    <meta charset="UTF-8">
    <title>Modifica il sensore</title>
</head>
<body class="landing">
<div id="page-wrapper">
    <header th:replace="fragments/top :: top"></header>
    <section id="main" class="container">
        <div class="row">
            <div class="col-12">
                <section class="box">
                    <div class="row gtr-uniform">
                        <div class="col-2 col-4-mobile ">
                            <a th:href="@{/sensors}" class="button icon solid fa-chevron-left">Indietro</a>
                        </div>
                        <div class="col-9 col-8-mobile">
                            <h2>Modifica il sensore</h2>
                        </div>
                        <div class="col-12 col-12-mobile"><hr></div>
                        <div class="col-12 col-12-mobile"><br></div>
                    </div>
                    <h3 th:if="${message != null}" th:text="${message}" class="error"></h3>

                    <!--
                    <div class="col-6 col-12-mobile">
                        <%= form.label :id, "ID univoco della vmc"%>
                        <%= form.text_field :id, placeholder: "ID univoco della vmc", required: true, minlength: 32, maxlength: 32 %>
                    </div>
                    <div class="col-6 col-12-mobile"></div>
                    <div class="col-3 col-6-mobile">
                        <%= form.label :programmed_on_time, "Orario programmato di accensione"%>
                        <%= form.time_field :programmed_on_time%>
                    </div>
                    <div class="col-3 col-6-mobile">
                        <label> &nbsp;</label>
                        <input type="button" id="removeOn" value="Rimuovi timer accensione"/>
                    </div>
                    <div class="col-3 col-6-mobile">
                        <%= form.label :programmed_off_time, "Orario programmato di spegnimento"%>
                        <%= form.time_field :programmed_off_time%>
                    </div>
                    <div class="col-3 col-6-mobile">
                        <label> &nbsp;</label>
                        <input type="button" id="removeOff" value="Rimuovi timer spegnimento"/>
                    </div>
                    <div class="col-12 col-12-mobile">
                        <%= form.submit "Applica le modifiche alla VMC" %>
                    </div>
                    <script>
                        $("#removeOn").click(function(){
                            $("#vmc_programmed_on_time").val("");
                        })
                        $("#removeOff").click(function(){
                            $("#vmc_programmed_off_time").val("");
                        })
                    </script>
                    -->

                    <h3 th:if="${sensor == null}" class="error">Sensore non trovato</h3>
                    <form th:if="${sensor != null}" th:action="@{/sensors/__${sensor.id}__}" th:object="${sensor}" th:method="put" class="row gtr-uniform">
                        <div class="col-6 col-12-mobile">
                            <label>Nome del sensore:</label>
                            <input type="text" th:field="*{nome}" placeholder="Nome del sensore" required>
                        </div>
                        <div class="col-6 col-12-mobile">
                            <label>Posizione del sensore</label>
                            <input type="text" th:field="*{location}" placeholder="Posizione del sensore" required>
                        </div>
                        <div class="col-6 col-8-mobile">
                            <label>ID del sensore</label>
                            <input type="text" th:field="*{id}" placeholder="ID del sensore" required minlength="32" maxlength="32">
                        </div>
                        <div class="col-6 col-4-mobile">
                            <label>&nbsp;</label>
                            <input type="button" value="Genera id in automatico" id="makeID">
                        </div>
                        <div class="col-12 col-12-mobile"><br></div>
                        <div class="col-12 col-12-mobile">
                            <input type="submit" value="Salva le modifiche al sensore">
                        </div>
                    </form>
                </section>
            </div>
        </div>
    </section>
</div>
<div th:replace="fragments/bottom :: bottom"></div>
<script id="random-id-creator">
    $("#makeID").click(function() {
        makeid(32);
    });
    function makeid(length) {
        var result           = '';
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var charactersLength = characters.length;
        for ( var i = 0; i < length; i++ ) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        $("#id").val(result);
    }
</script>
</body>
</html>